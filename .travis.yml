language: c
addons:
  apt:
    packages: &1
    - lcov
# Compiler selection
compiler:
  - clang
  - gcc
env:
  - ANALYZE=false
  - ANALYZE=true
# Build steps
before_install:
  - pip install --user cpp-coveralls
script:
  - ./.travis.sh
after_success:
  # Creating report
  - export COVERALLS_SERVICE_NAME=travis-ci
  - export COVERALLS_REPO_TOKEN=2giWzj8ePoGOf6H9QQxpV9jUH8I0vh8vv
  - cmake -DCOVERAGE=1
  - make
  - make test
  - coveralls --root . -E ".*gtest.*" -E ".*CMakeFiles.*"

